ACTOR ExMephistopheles 31415
{
//$Category "Danmaku Demons"
	Tag "Mephistopheles"
	Health 3000
	Radius 32
	Height 96
	Speed 6
	PainChance 1
    BloodColor "75 25 00"
	Mass 100000
	Scale 1.5
	MONSTER
	Obituary "%o tried to hunt down Mephistopheles, but failed miserably and was turned to ash instead."
	SeeSound "pyro/see"
	PainSound "pyro/pain"
	DeathSound "pyro/death"
	ActiveSound "pyro/idle"
	MinMissileChance 64
	MeleeDamage 20
	DamageFactor "PlayerSpellcard", 0
	DamageFactor "MephistophelesDamage", 0
	+FLOORCLIP
	//A couple boss flags
	+BOSSDEATH
	+NORADIUSDMG
	+BOSS
	+NOICEDEATH
	+DONTRIP
	+DONTMORPH
	//Extremely aggressive
	+MISSILEMORE
	+MISSILEEVENMORE
	+LOOKALLAROUND
	//Very Persistent
	+NOTIMEFREEZE
	+NOBLOCKMONST
	//Easily Distracted, to make him easier.
	+QUICKTORETALIATE
	states
	{ 
	Spawn: 
		PYLD AB 10 A_Look 
		Loop 
	See:
		PYLD A 0 A_Jump(32,"Teleport")
		PYLD AAAAAA 1 A_Chase
		PYLD A 0 A_SpawnItemEx("WalkFire",0,0,0,1,0,0,0,128)
		PYLD BBBBBB 1 A_Chase
		PYLD B 0 A_SpawnItemEx("WalkFire",0,0,0,1,0,0,0,128)
		PYLD CCCCCC 1 A_Chase
		PYLD C 0 A_SpawnItemEx("WalkFire",0,0,0,1,0,0,0,128)
		PYLD DDDDDD 1 A_Chase
		PYLD D 0 A_SpawnItemEx("WalkFire",0,0,0,1,0,0,0,128)
		Loop
	Missile:
		PYLD A 0 A_Jump(104,"NormalAttack") //40% (2/5 of 100%)
		PYLD A 0 A_Jump(85,"PyroBlast") //20% (1/3 of 60%)
		PYLD A 0 A_Jump(64,"MeteorStorm") //10% (1/4 of 40%)
		PYLD A 0 A_Jump(85,"BruiserAttack","BruiserSpikes") //10%, 5% for each
		Goto NormalAttack2 //20%
    NormalAttack:
		PYLD A 0 A_Jump(16,"Teleport","FireNova")
		PYLD EF 4 BRIGHT A_FaceTarget
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-36,36))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-30,30))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-24,24))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-18,18))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-12,12))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-6,6))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,0)
		PYLD GH 4 BRIGHT
		PYLD IJ 4 BRIGHT A_FaceTarget
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-36,36))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-30,30))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-24,24))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-18,18))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-12,12))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-6,6))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,0)
		PYLD KL 3 BRIGHT
		PYLD A 0 A_Jump(32,"Teleport","FireNova","See","Missile")
		PYLD EF 3 BRIGHT A_FaceTarget
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-36,36))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-30,30))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-24,24))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-18,18))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-12,12))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-6,6))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,0)
		PYLD GH 3 BRIGHT
		PYLD IJ 3 BRIGHT A_FaceTarget
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-36,36))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-30,30))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-24,24))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-18,18))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-12,12))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-6,6))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,0)
		PYLD KL 3 BRIGHT
		PYLD A 0 A_Jump(64,"Teleport","FireNova","See","Missile")
		PYLD EF 2 BRIGHT A_FaceTarget
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-36,36))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-30,30))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-24,24))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-18,18))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-12,12))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-6,6))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,0)
		PYLD GH 2 BRIGHT
		PYLD IJ 2 BRIGHT A_FaceTarget
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-36,36))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-30,30))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-24,24))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-18,18))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-12,12))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-6,6))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,0)
		PYLD KL 2 BRIGHT
		PYLD A 0 A_Jump(128,"See","Missile")
	FireNova:
		PYLD MN 8 BRIGHT A_FaceTarget
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,0,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,15,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,30,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,45,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,60,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,75,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,90,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,105,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,120,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,135,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,150,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,165,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,180,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,195,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,210,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,225,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,240,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,255,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,270,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,285,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,300,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,315,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,330,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,345,CMF_AIMOFFSET)
		PYLD OP 4 BRIGHT
		Goto See
	NormalAttack2:
		PYLD EF 4 BRIGHT A_FaceTarget
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-36,36))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-30,30))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-24,24))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-18,18))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-12,12))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-6,6))
		PYLD G 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,0)
		PYLD GH 3 BRIGHT
		PYLD IJ 4 BRIGHT A_FaceTarget
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-36,36))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-30,30))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-24,24))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-18,18))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-12,12))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,random(-6,6))
		PYLD K 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,0)
		PYLD KL 4 BRIGHT
		PYLD MN 3 BRIGHT A_FaceTarget
		PYLD OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO 0 BRIGHT A_CustomMissile("FallingComet2",42,0,frandom(-90,90),CMF_OFFSETPITCH,frandom(-90,90))
		PYLD OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO 0 BRIGHT A_CustomMissile("FallingComet2",42,0,frandom(-120,120),CMF_OFFSETPITCH,frandom(-90,90))
		PYLD OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO 0 BRIGHT A_CustomMissile("FallingComet2",42,0,frandom(-150,150),CMF_OFFSETPITCH,frandom(-90,90))
		PYLD OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO 0 BRIGHT A_CustomMissile("FallingComet2",42,0,frandom(-180,180),CMF_OFFSETPITCH,frandom(-90,90))
		PYLD OP 4 BRIGHT
		Goto See
	PyroBlast:
		PYLD MN 8 BRIGHT A_FaceTarget
		PYLD O 4 BRIGHT A_CustomMissile("ExMephistophelesPyroBlast",42,0,0)
		PYLD P 4 BRIGHT
		Goto See
	MeteorStorm:
		PYLD MN 8 BRIGHT A_FaceTarget
		PYLD OOOOOOOOOOOOOOOOPPPPPPPPPPPPPPPP 1 BRIGHT A_CustomMissile("RainCometNull",42,0,random(0,360))
		Goto See
	BruiserAttack:
		PYLD EF 3 BRIGHT A_FaceTarget
		PYLD GGGG 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(30,45),CMF_OFFSETPITCH,frandom(-10,10))
		PYLD G 1 BRIGHT A_FaceTarget
		PYLD GGGG 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(15,30),CMF_OFFSETPITCH,frandom(-10,10))
		PYLD G 1 BRIGHT A_FaceTarget
		PYLD GGGG 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(0,15),CMF_OFFSETPITCH,frandom(-10,10))
		PYLD G 1 BRIGHT A_FaceTarget
		PYLD HHHH 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(-15,0),CMF_OFFSETPITCH,frandom(-10,10))
		PYLD H 1 BRIGHT A_FaceTarget
		PYLD HHHH 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(-30,-15),CMF_OFFSETPITCH,frandom(-10,10))
		PYLD H 1 BRIGHT A_FaceTarget
		PYLD HHHH 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(-45,-30),CMF_OFFSETPITCH,frandom(-10,10))
		PYLD H 1 BRIGHT A_FaceTarget
		PYLD IJ 3 BRIGHT A_FaceTarget
		PYLD KKKK 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(-45,-30),CMF_OFFSETPITCH,frandom(-10,10))
		PYLD K 1 BRIGHT A_FaceTarget
		PYLD KKKK 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(-30,-15),CMF_OFFSETPITCH,frandom(-10,10))
		PYLD K 1 BRIGHT A_FaceTarget
		PYLD KKKK 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(-15,0),CMF_OFFSETPITCH,frandom(-10,10))
		PYLD K 1 BRIGHT A_FaceTarget
		PYLD LLLL 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(0,15),CMF_OFFSETPITCH,frandom(-10,10))
		PYLD L 1 BRIGHT A_FaceTarget
		PYLD LLLL 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(15,30),CMF_OFFSETPITCH,frandom(-10,10))
		PYLD L 1 BRIGHT A_FaceTarget
		PYLD LLLL 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(30,45),CMF_OFFSETPITCH,frandom(-10,10))
		PYLD L 1 BRIGHT A_FaceTarget
		PYLD EF 3 BRIGHT A_FaceTarget
		PYLD GG 0 BRIGHT A_CustomMissile("BruiserBall1",42,0,frandom(30,45))
		PYLD G 1 BRIGHT A_FaceTarget
		PYLD GG 0 BRIGHT A_CustomMissile("BruiserBall1",42,0,frandom(15,30))
		PYLD G 1 BRIGHT A_FaceTarget
		PYLD GG 0 BRIGHT A_CustomMissile("BruiserBall1",42,0,frandom(0,15))
		PYLD G 1 BRIGHT A_FaceTarget
		PYLD HH 0 BRIGHT A_CustomMissile("BruiserBall1",42,0,frandom(-15,0))
		PYLD H 1 BRIGHT A_FaceTarget
		PYLD HH 0 BRIGHT A_CustomMissile("BruiserBall1",42,0,frandom(-30,-15))
		PYLD H 1 BRIGHT A_FaceTarget
		PYLD HH 0 BRIGHT A_CustomMissile("BruiserBall1",42,0,frandom(-45,-30))
		PYLD H 1 BRIGHT A_FaceTarget
		PYLD IJ 3 BRIGHT A_FaceTarget
		PYLD KK 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(-45,-30))
		PYLD K 1 BRIGHT A_FaceTarget
		PYLD KK 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(-30,-15))
		PYLD K 1 BRIGHT A_FaceTarget
		PYLD KK 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(-15,0))
		PYLD K 1 BRIGHT A_FaceTarget
		PYLD LL 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(0,15))
		PYLD L 1 BRIGHT A_FaceTarget
		PYLD LL 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(15,30))
		PYLD L 1 BRIGHT A_FaceTarget
		PYLD LL 0 BRIGHT A_CustomMissile("BruiserBall2",42,0,frandom(30,45))
		PYLD L 1 BRIGHT A_FaceTarget
		PYLD MN 3 BRIGHT A_FaceTarget
		PYLD O 1 BRIGHT A_CustomMissile("BruiserBallL",42,0,0)
		PYLD O 0 BRIGHT A_CustomMissile("BruiserBallL",42,0,15)
		PYLD O 1 BRIGHT A_CustomMissile("BruiserBallL",42,0,-15)
		PYLD O 0 BRIGHT A_CustomMissile("BruiserBallL",42,0,30)
		PYLD O 1 BRIGHT A_CustomMissile("BruiserBallL",42,0,-30)
		PYLD P 3 BRIGHT
		Goto See
	BruiserSpikes:
		PYLD MN 16 BRIGHT A_FaceTarget
		PYLD O 0 BRIGHT A_CustomMissile("BruiserFireSpawner",28,0,0)
		PYLD O 0 BRIGHT A_CustomMissile("BruiserFireSpawner",28,0,30)
		PYLD O 0 BRIGHT A_CustomMissile("BruiserFireSpawner",28,0,60)
		PYLD O 0 BRIGHT A_CustomMissile("BruiserFireSpawner",28,0,90)
		PYLD O 0 BRIGHT A_CustomMissile("BruiserFireSpawner",28,0,120)
		PYLD O 0 BRIGHT A_CustomMissile("BruiserFireSpawner",28,0,150)
		PYLD O 0 BRIGHT A_CustomMissile("BruiserFireSpawner",28,0,180)
		PYLD O 0 BRIGHT A_CustomMissile("BruiserFireSpawner",28,0,210)
		PYLD O 0 BRIGHT A_CustomMissile("BruiserFireSpawner",28,0,240)
		PYLD O 0 BRIGHT A_CustomMissile("BruiserFireSpawner",28,0,270)
		PYLD O 0 BRIGHT A_CustomMissile("BruiserFireSpawner",28,0,300)
		PYLD O 0 BRIGHT A_CustomMissile("BruiserFireSpawner",28,0,330)
		PYLD OP 8 BRIGHT
		Goto See
	Teleport:
		PYLD O 1 A_FaceTarget
		PYLD O 0 A_CustomMissile("EscapeExplosion",28,10,0,0)
		PYLD OOOOOOOOOOOOOOOO 0 A_CustomMissile("PyroBall",0,0,frandom(0,360),CMF_OFFSETPITCH,frandom(-15,75))
		PYLD O 3 
		PYLD P 3 BRIGHT
		PYLD A 0 A_UnSetShootable
		PYLD A 1 A_PlaySound("pyro/tele")
		PYLD A 1 A_SetTranslucent(0.90)
		PYLD A 1 A_SetTranslucent(0.80)
		PYLD A 1 A_SetTranslucent(0.70)
		PYLD A 1 A_SetTranslucent(0.60)
		PYLD A 1 A_SetTranslucent(0.50)
		PYLD A 1 A_SetTranslucent(0.40)
		PYLD A 1 A_SetTranslucent(0.30)
		PYLD A 1 A_SetTranslucent(0.20)
		PYLD A 1 A_SetTranslucent(0.10)
		NULL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Wander
		NULL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Wander
		PYLD A 1 A_PlaySound("pyro/tele")
		PYLD A 1 A_SetTranslucent(0.10)
		PYLD A 1 A_SetTranslucent(0.20)
		PYLD A 1 A_SetTranslucent(0.30)
		PYLD A 1 A_SetTranslucent(0.40)
		PYLD A 1 A_SetTranslucent(0.50)
		PYLD A 1 A_SetTranslucent(0.60)
		PYLD A 1 A_SetTranslucent(0.70)
		PYLD A 1 A_SetTranslucent(0.80)
		PYLD A 1 A_SetTranslucent(0.90)
		PYLD A 1 A_SetTranslucent(1.0)
		PYLD A 0 A_CustomMissile("EscapeExplosion",28,10,0,0)
		PYLD OOOOOOOOOOOOOOOO 0 A_CustomMissile("PyroBall",0,0,frandom(0,360),CMF_OFFSETPITCH,frandom(-15,75))
		PYLD A 0 A_SetShootable
		Goto See
	Pain: 
		PYLD Q 2 
		PYLD Q 2 A_Pain 
		Goto See
	Death:
		PYLD Q 2 A_GiveInventory("BulletDeathTrigger",1)
		PYLD Q 2 A_Pain
		PYLD Q 0 A_SpawnItemEx("TeleportFog",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	} 
}

ACTOR ExMephistophelesFireShot
{
	Radius 3
	Height 3
	Speed 15
	Damage 2
	PROJECTILE
	RENDERSTYLE ADD
	ALPHA 0.67
	+FIREDAMAGE
	+STRIFEDAMAGE
	SeeSound "pyro/flame"
	DeathSound "pyro/flamepoof"
	Decal RevenantScorch
	DamageType "MephistophelesDamage"
	States
	{
	Spawn:
		FSHT A 1 Bright A_SpawnItemEx("FireTail",0,0,0,0,0,0,0,128)
		FSHT A 1 Bright A_SpawnItemEx("FireTail",0,0,0,0,0,0,0,128)
		FSHT A 1 Bright A_SpawnItemEx("FireTail",0,0,0,0,0,0,0,128)
		FSHT A 1 Bright A_SpawnItemEx("FireTail",0,0,0,0,0,0,0,128)
		FSHT A 1 Bright A_SpawnItemEx("FireTail",0,0,0,0,0,0,0,128)
		FSHT A 1 Bright A_SpawnItemEx("FireTail",0,0,0,0,0,0,0,128)
		Loop
	Death:
		FSHT A 0 Bright A_Explode(32,64,0)
		FSHT B 3 Bright
		FSHT C 3 Bright
		FSHT D 3 Bright
		FSHT E 3 Bright
		Stop
	}
}

actor FireTail
{
	PROJECTILE
	RENDERSTYLE ADD
	+NOCLIP
	ALPHA 0.4
	States
	{
	Spawn:
		TNT1 A 0
		FRTB ABCDEFGHI 1 Bright
		Stop
	}
}

ACTOR EscapeExplosion 
{
	SeeSound "pyro/explosion"
	Radius 8
	Height 56
	Speed 0
	Scale 1.5
	States
	{
	Spawn:
		TNT1 A 0
		NKXP BCDEFGHIJKLMNOPQRSTUV 3 BRIGHT
		Stop
	}
}

ACTOR PyroBall
{
	Radius 4
	Height 8
	Speed 25
	FastSpeed 35
	Damage 5
	DamageType "MephistophelesDamage"
	SEESOUND "pyro/bomb"
	DEATHSOUND "pyro/bombhit"
	PROJECTILE
	RENDERSTYLE Add
	Alpha 0.7
	-NoGravity
	+StrifeDamage
	+DoomBounce
	+FireDamage
	Decal RevenantScorch
	states
	{
	Spawn:
		RBA2 A 0 BRIGHT
		RBA2 A 0 BRIGHT A_ScaleVelocity(frandom(0.4,1.0))
		RBA2 AAAABBBB 1 BRIGHT 
		Goto Spawn+2
	Death:
	Crash:
	XDeath:
		RBL2 DEFGHI 4 BRIGHT 
		Stop
	}
}

ACTOR FirebombExplosion1
{
	Radius 11
	Height 8
	Speed 18
	Damage 5
	+NOBLOCKMAP
	+DROPOFF
	+MISSILE
	+ACTIVATEIMPACT
	+ACTIVATEPCROSS
	+STRIFEDAMAGE
	DamageType "MephistophelesDamage"
	ExplosionDamage 64
	ExplosionRadius 128
	Obituary "%o was killed by a Firebomb explosion."
	States
	{
	Spawn:
		FRME A 1 Bright
		Loop
	Death:
		FRME A 0
		FRME A 0 A_PlaySound("pyro/blastexplosion")
		FRME A 3 Bright A_Explode
		FRME BBBBBBBB 0 Bright A_CustomMissile("PyroBall",0,0,frandom(0,360),CMF_OFFSETPITCH|CMF_TRACKOWNER,frandom(-15,75))
		FRME B 3 Bright A_CustomMissile("FirebombExplosion2",25,0,180)
		FRME CDEFGHIJKLMNOPQRS 3 Bright
		Stop
	}
}

ACTOR FirebombExplosion2 : FirebombExplosion1
{
	Speed 16
	Damage 4
	ExplosionRadius 112
	States
	{
	Death:
		FRME A 0
		FRME A 0 A_PlaySound("pyro/blastexplosion")
		FRME A 3 Bright A_Explode
		FRME BBBBBBBB 0 Bright A_CustomMissile("PyroBall",0,0,frandom(0,360),CMF_OFFSETPITCH|CMF_TRACKOWNER,frandom(-15,75))
		FRME B 3 Bright A_CustomMissile("FirebombExplosion3",20,0,180)
		FRME CDEFGHIJKLMNOPQRS 3 Bright
		Stop
	}
}

ACTOR FirebombExplosion3 : FirebombExplosion1
{
	Speed 14
	Damage 3
	ExplosionRadius 96
	States
	{
	Death:
		FRME A 0
		FRME A 0 A_PlaySound("pyro/blastexplosion")
		FRME A 3 Bright A_Explode
		FRME BBBBBBBB 0 Bright A_CustomMissile("PyroBall",0,0,frandom(0,360),CMF_OFFSETPITCH|CMF_TRACKOWNER,frandom(-15,75))
		FRME BCDEFGHIJKLMNOPQRS 3 Bright
		Stop
	}
}

ACTOR ExMephistophelesPyroBlast
{
	PROJECTILE
	+SeekerMissile
	+NoGravity
	RENDERSTYLE Add
	Alpha 0.4
	SEESOUND "pyro/blast"
	DEATHSOUND "pyro/flamepoof"
	DamageType "MephistophelesDamage"
	Speed 17
	Height 10
	Radius 10
	Decal Scorch
	states
	{
	Spawn:
		SBLL ABCDEFGHIJ 1 BRIGHT A_SpawnItemEx("FireTail",0,0,0,0,0,0,0,128)
		SBLL A 0 BRIGHT A_SeekerMissile(0,1)
		Goto Spawn+1
	Death:
		SBLL K 0 A_CustomMissile("FirebombExplosion1",1,0,45,CMF_TRACKOWNER)
		SBLL K 0 A_CustomMissile("FirebombExplosion1",1,0,135,CMF_TRACKOWNER)
		SBLL K 0 A_CustomMissile("FirebombExplosion1",1,0,225,CMF_TRACKOWNER)
		SBLL K 0 A_CustomMissile("FirebombExplosion1",1,0,315,CMF_TRACKOWNER)
		SBLL LMNOPQRSTUVW 1 BRIGHT
		Stop
	}
}

ACTOR WalkFire
{
	+NOCLIP
	+MISSILE
	+DROPOFF
	+RANDOMIZE
	Scale 1.5
	Speed 1
	RENDERSTYLE ADD
	ALPHA 0.67
	States
	{
	Spawn:
		NULL A 8
		FRTF A 3 Bright
		FRTF A 0 
		FRTF B 3 Bright
		FRTF B 0 
		FRTF C 3 Bright
		FRTF C 0 
		FRTF C 0 
		FRTF C 0 A_Jump(191,4)
		FRTF C 0 A_CustomMissile("WalkFire", 0, 24, 0)
		FRTF C 0 A_CustomMissile("WalkFire", 0, 0, 0)
		FRTF C 0 A_CustomMissile("WalkFire", 0, -24, 0)
		FRTF DEFGHIJKLMNO 3 Bright
		Stop
	}
}

ACTOR RainCometNull
{
	Radius 0
	Height 0
	Speed 8
	PROJECTILE
	+FloorClip
	+Ripper
	+DoomBounce
	+CeilingHugger
	+DontHurtSpecies
	states
	{
	Spawn:
		ZAP5 AAAAAAAAAAAA 1 A_Wander
		ZAP5 A 0 A_CustomMissile("FallingComet",-24,random(0,128),random(0,360),2,random(1,89))
		ZAP5 A 0 A_GiveInventory("EnemyCounter1", 1)
		ZAP5 A 0 A_JumpIfInventory("EnemyCounter1", 32, "Death")
		Loop
	Death:
		ZAP5 A 0
		Stop
	}
}

ACTOR FallingComet
{
	Radius 6
	Height 8
	Speed 5
	Damage 5
	ExplosionDamage 40
	ExplosionRadius 80
	Scale .55
	PROJECTILE
	SEESOUND "pyro/comet"
	DEATHSOUND "pyro/cometdeath"
	DamageType "MephistophelesDamage"
	-NoGravity
	-Float
	+FloorClip
	+DontHurtSpecies 
	+SpawnCeiling
	+StrifeDamage
	Decal RevenantScorch
	states
	{
	Spawn:
		COMT AAAABBBBCCCC 1 BRIGHT A_SpawnItemEx("FireTail", 0, 0, 0, 0, 0, 0, 0, 128)
		Loop
	Death:
		COMT D 3 BRIGHT A_SpawnItemEx("CometDeathGlow", 0, 0, 0, 0, 0, 0, 0, 128)
		COMT E 3 BRIGHT A_Explode(20,80,0)
		COMT E 0 A_SpawnItemEx("CometDeath", 0, 0, 0, 0, 0, 0, 0, 128)
		Stop
	}
}

ACTOR FallingComet2 : FallingComet { Speed 50 }

actor CometDeathGlow : FireTail
{
	Scale 2.0
	Alpha 0.6
	States
	{
	Spawn:
		TNT1 A 0
		FRTB ABCDEFGHI 3 Bright
		Stop
	}
}

actor CometDeath
{
	PROJECTILE
	RENDERSTYLE ADD
	+NOCLIP
	ALPHA 0.7
	States
	{
	Spawn:
		TNT1 A 0	
		COMT FGHI 3 Bright
		Stop
	}
}

actor ExMephistophelesLust : ExMephistopheles 31416
{
	States
	{
	Missile:
		PYLD A 0 A_Jump(96,"AirBurst")
		PYLD A 0 A_Jump(104,"NormalAttack")
		PYLD A 0 A_Jump(85,"PyroBlast")
		PYLD A 0 A_Jump(64,"MeteorStorm")
		PYLD A 0 A_Jump(85,"BruiserAttack","BruiserSpikes")
		Goto NormalAttack2
	AirBurst:
		PYLD MN 8 BRIGHT A_FaceTarget
		PYLD O 0 A_PlaySound("pyro/tele", 0, 0.5, 0, ATTN_NONE)
		PYLD O 0 A_PlaySound("pyro/tele", 0, 0.5, 0, ATTN_NORM)
		PYLD O 0 A_GiveToTarget("ExMephistophelesAirBurstAttack")
		PYLD O 0 ThrustThingZ(0,50,0,0)
		PYLD OP 8 BRIGHT
		PYLD A 0 A_Jump(128,"NormalAttack")
		PYLD A 0 A_Jump(85,"PyroBlast")
		PYLD A 0 A_Jump(64,"MeteorStorm")
		Goto NormalAttack2
	}
}

actor ExMephistophelesAirBurstAttack : CustomInventory
{
  -COUNTITEM
  states
  {
  Spawn:
    TNT1 A 1
    stop
  Pickup:
	TNT1 A 0
    TNT1 A 0 ThrustThingZ(0,75,0,1)
    stop
  }
}

actor ExMephistophelesGluttony : ExMephistopheles 31417
{
	States
	{
	See:
		PYLD A 0 A_Jump(64,"Teleport")
		PYLD AAAAAA 1 A_Chase
		PYLD A 0 A_SpawnItemEx("WalkFire",0,0,0,1,0,0,0,128)
		PYLD BBBBBB 1 A_Chase
		PYLD B 0 A_SpawnItemEx("WalkFire",0,0,0,1,0,0,0,128)
		PYLD CCCCCC 1 A_Chase
		PYLD C 0 A_SpawnItemEx("WalkFire",0,0,0,1,0,0,0,128)
		PYLD DDDDDD 1 A_Chase
		PYLD D 0 A_SpawnItemEx("WalkFire",0,0,0,1,0,0,0,128)
		Loop
	Missile:
		PYLD A 0 A_Jump(51,"Teleport")
		PYLD A 0 A_Jump(64,"PyroBlast")
		PYLD A 0 A_Jump(85,"MeteorStorm")
		PYLD A 0 A_Jump(128,"BruiserAttack","BruiserSpikes")
		PYLD A 0 A_Jump(170,"NormalAttack")
		Goto NormalAttack2
	PyroBlast:
		PYLD MN 8 BRIGHT A_FaceTarget
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesPyroBlast",42,0,-20)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesPyroBlast",42,0,20)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesPyroBlast",42,0,-10)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesPyroBlast",42,0,10)
		PYLD O 4 BRIGHT A_CustomMissile("ExMephistophelesPyroBlast",42,0,0)
		PYLD P 4 BRIGHT
		Goto See
	MeteorStorm:
		PYLD MN 8 BRIGHT A_FaceTarget
		PYLD OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO 0 BRIGHT A_CustomMissile("FallingComet2",42,0,frandom(-90,90),CMF_OFFSETPITCH,frandom(-90,90))
		PYLD OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO 0 BRIGHT A_CustomMissile("FallingComet2",42,0,frandom(-120,120),CMF_OFFSETPITCH,frandom(-90,90))
		PYLD OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO 0 BRIGHT A_CustomMissile("FallingComet2",42,0,frandom(-150,150),CMF_OFFSETPITCH,frandom(-90,90))
		PYLD OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO 0 BRIGHT A_CustomMissile("FallingComet2",42,0,frandom(-180,180),CMF_OFFSETPITCH,frandom(-90,90))
		PYLD OOOOOOOOOOOOOOOOPPPPPPPPPPPPPPPP 1 BRIGHT A_CustomMissile("RainCometNull",42,0,random(0,360))
		Goto See
	FireNova:
		PYLD MN 8 BRIGHT A_FaceTarget
		PYLD OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO 0 BRIGHT A_CustomMissile("FallingComet2",42,0,frandom(-90,90),CMF_OFFSETPITCH,frandom(-90,90))
		PYLD OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO 0 BRIGHT A_CustomMissile("FallingComet2",42,0,frandom(-120,120),CMF_OFFSETPITCH,frandom(-90,90))
		PYLD OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO 0 BRIGHT A_CustomMissile("FallingComet2",42,0,frandom(-150,150),CMF_OFFSETPITCH,frandom(-90,90))
		PYLD OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO 0 BRIGHT A_CustomMissile("FallingComet2",42,0,frandom(-180,180),CMF_OFFSETPITCH,frandom(-90,90))
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,0,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,15,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,30,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,45,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,60,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,75,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,90,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,105,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,120,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,135,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,150,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,165,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,180,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,195,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,210,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,225,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,240,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,255,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,270,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,285,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,300,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,315,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,330,CMF_AIMOFFSET)
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesFireShot",42,0,345,CMF_AIMOFFSET)
		PYLD OP 4 BRIGHT
		Goto See
	}
}

actor ExMephistophelesGreedMegasphereTrigger : Boolean {}
actor ExMephistophelesGreed : ExMephistopheles 31418
{
	States
	{
	Missile:
		PLYD A 0 A_JumpIfInventory("ExMephistophelesGreedMegasphereTrigger", 1, "Continue")
		PYLD MN 8 BRIGHT A_FaceTarget
		PYLD O 0 BRIGHT A_CustomMissile("ExMephistophelesGreedMegasphereAttack",42,0,0)
		PYLD OP 4 BRIGHT
		PLYD A 0 A_GiveInventory("ExMephistophelesGreedMegasphereTrigger", 1)
	Continue:
		PYLD A 0 A_Jump(104,"NormalAttack") //40% (2/5 of 100%)
		PYLD A 0 A_Jump(85,"PyroBlast") //20% (1/3 of 60%)
		PYLD A 0 A_Jump(64,"MeteorStorm") //10% (1/4 of 40%)
		PYLD A 0 A_Jump(85,"BruiserAttack","BruiserSpikes") //10%, 5% for each
		Goto NormalAttack2 //20%
	}
}
actor ExMephistophelesGreedMegasphereAttack
{
  Radius 4
  Height 8
  Speed 8
  Damage (8)
  Projectile
  +SEEKERMISSILE
  +RANDOMIZE
  +RIPPER
  +HEXENBOUNCE
  BounceCount 1000
  SeeSound "weapons/rocklf"
  DeathSound "weapons/rocklx"
  States
  {
  Spawn:
    MEGA A 0 A_SeekerMissile(90, 90, SMF_PRECISE)
    MEGA AAAAAA 1 A_JumpIfInTargetInventory("BulletDeathTrigger",1,"Death")
    MEGA B 0 A_SeekerMissile(90, 90, SMF_PRECISE)
    MEGA BBBBBB 1 A_JumpIfInTargetInventory("BulletDeathTrigger",1,"Death")
    MEGA C 0 A_SeekerMissile(90, 90, SMF_PRECISE)
    MEGA CCCCCC 1 A_JumpIfInTargetInventory("BulletDeathTrigger",1,"Death")
    MEGA D 0 A_SeekerMissile(90, 90, SMF_PRECISE)
    MEGA DDDDDD 1 A_JumpIfInTargetInventory("BulletDeathTrigger",1,"Death")
    Loop
  Death:
    MISL B 8 Bright
    MISL C 6 Bright
    MISL D 4 Bright
    Stop
  }
}

actor ExMephistophelesMalebolge : ExMephistopheles 31419
{
	Health 3000
	var int user_angle;
	States
	{
	See:
		PYLD A 0 A_Jump(64,"Teleport")
		PYLD AAAAAA 1 A_Chase
		PYLD A 0 A_SpawnItemEx("WalkFire",0,0,0,1,0,0,0,128)
		PYLD BBBBBB 1 A_Chase
		PYLD B 0 A_SpawnItemEx("WalkFire",0,0,0,1,0,0,0,128)
		PYLD CCCCCC 1 A_Chase
		PYLD C 0 A_SpawnItemEx("WalkFire",0,0,0,1,0,0,0,128)
		PYLD DDDDDD 1 A_Chase
		PYLD D 0 A_SpawnItemEx("WalkFire",0,0,0,1,0,0,0,128)
		Loop
	Missile:
		PYLD A 0 A_Jump(128,"GETWALLED")
		PYLD A 0 A_Jump(51,"Teleport")
		PYLD A 0 A_Jump(104,"NormalAttack")
		PYLD A 0 A_Jump(85,"PyroBlast")
		PYLD A 0 A_Jump(64,"MeteorStorm")
		PYLD A 0 A_Jump(85,"BruiserAttack","BruiserSpikes")
		Goto NormalAttack2
	GETWALLED:
		PYLD MN 8 BRIGHT A_FaceTarget
		PYLD N 0 BRIGHT A_SetUserVar("user_angle", 0)
		Goto WallLoop
	WallLoop:
		PYLD A 0 A_SetUserVar("user_angle", user_angle + 1)
		PYLD A 0 A_CustomMissile("MephistophelesCircleBallSlow",40,0,user_angle,CMF_AIMDIRECTION,0)
		PYLD A 0 A_JumpIf(user_angle >= 360, "EndWall")
		Loop
	EndWall:
		PYLD OP 4 BRIGHT A_FaceTarget
		Goto See
	}
}
actor MephistophelesCircleBallSlow : MephistophelesCircleBall
{
	Speed 8
	FastSpeed 12
	Damage (8)
	DamageType "MephistophelesDamage"
}

actor CocytusPatchouli : PatchouliNS2
{
	-NORADIUSDMG
	+LOOKALLAROUND
	+NOINFIGHTING
	DropItem "None"
	Health 2250
	States
	{
	See:
		TNT1 A 0 A_GiveInventory("EnemyCounter2",1)
		PTCH M 0 A_ChangeFlag("NOPAIN",0)
		PTCH ABCDEFGHIJKLM 2 A_Chase
		Loop
	ProjectileAttack:
		PTCH M 0 A_ChangeFlag("NOPAIN",0)
		PTCH M 0 A_TakeInventory("EnemyCounter1",99)
		Goto ProjectileAttackEasy
	Death:
		TNT1 A 0 A_PlaySound("touhou/defeat",0,1.0,0,ATTN_NORM)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFireWhite",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		Stop
	}
}

actor CocytusSakuya : SakuyaNS3
{
	-NORADIUSDMG
	+LOOKALLAROUND
	+NOINFIGHTING
	DropItem "None"
	Health 2500
	States
	{
	See:
		SAKU A 3 A_Chase
		Loop
	Melee:
	Missile:
		Goto MissileEasy
	Death:
		TNT1 A 0 A_PlaySound("touhou/defeat",0,1.0,0,ATTN_NORM)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFireWhite",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		Stop
	}
}

actor CocytusRemilia : RemiliaNS4
{
	-NORADIUSDMG
	+LOOKALLAROUND
	+NOINFIGHTING
	DropItem "None"
	Health 2000
	States
	{
	See:
		REMI ABCDEFGH 3 A_Chase
		Loop
	Missile:
		RHUR C 24
		REMI A 0 A_playsound("touhou/remi/woosh")
		REMI B 0 A_UnSetShootable
		REMI A 0 A_Facetarget
		BBAT ABCABCABCABCABCABCABCABC 2 A_CustomMissile("RemiBat",32,0,frandom(-80,80))
		REMI A 0 A_Facetarget
		REMI A 0 A_playsound("touhou/remi/poof")
		REMI A 0 A_FaceTarget
		Goto MissileNormal
	Death:
		TNT1 A 0 A_PlaySound("touhou/defeat",0,1.0,0,ATTN_NORM)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFireWhite",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		Stop
	}
}

actor CocytusYoumu : Youmu
{
	-NORADIUSDMG
	+LOOKALLAROUND
	+NOINFIGHTING
	DropItem "None"
	Health 2000
	States
	{
	Spawn:
		YOUM A 0
		YOUM ABCDEFGH 3 A_Look
		Loop
	Missile:
		TNT1 A 0 A_Jump(170,"Charge")
		Goto MissileEasy
	Death:
		TNT1 A 0 A_PlaySound("touhou/defeat",0,1.0,0,ATTN_NORM)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFireWhite",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		Stop
	}
}

actor CocytusYuyuko : YuyukoNS2
{
	-NORADIUSDMG
	+LOOKALLAROUND
	+NOINFIGHTING
	DropItem "None"
	Health 2250
	States
	{
	See:
		YUYU A 0 A_SetTranslucent(1.0,0)
		YUYU ABCDEFGHIJ 3 A_Chase
		Loop
	Missile:
		Goto MissileEasy
	Death:
		TNT1 A 0 A_PlaySound("touhou/defeat",0,1.0,0,ATTN_NORM)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFireWhite",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		Stop
	}
}

actor CocytusSuika : SuikaNS3
{
	-NORADIUSDMG
	+LOOKALLAROUND
	+NOINFIGHTING
	DropItem "None"
	Health 2500
	States
	{
	Spawn:
		SUIK A 0
		SUIK A 3 A_SetTranslucent(0.1,0)
		SUIK BCDEFGHIJKLMNOPQR 3 A_FadeIn(0.05)
	Idle:
		SUIK A 0 A_SetTranslucent(1.0,0)
		SUIK BCDEFGHIJKLMNOPQR 3 A_Look
		Loop
	See:
		SUIK A 0 A_SetTranslucent(1.0,0)
		SUIK A 0 A_Jump(32,"FastSee")
		SUIK ABCDEFGHI 3 A_Chase
		SUIK A 0 A_Jump(32,"FastSee")
		SUIK JKLMNOPQR 3 A_Chase
		Loop
	FastSee:
		SUIK A 0 A_Jump(32,"See")
		SUIK STUVWXYZ 2 A_Chase
		Loop
	Missile:
		SUIK A 0 A_Jump(128,"FloorSlam","Bombs","Puncher","FireBreath")
		Goto MainShot
	MainShot:
		Goto MainShotNormal
	FloorSlam:
		Goto FloorSlamEasy
	Bombs:
		Goto BombsEasy
	Puncher:
		Goto PuncherEasy
	FireBreath:
		Goto FireBreathEasy
	Death:
		TNT1 A 0 A_PlaySound("touhou/defeat",0,1.0,0,ATTN_NORM)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFireWhite",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		Stop
	}
}

actor CocytusAlice : AliceNS2
{
	-NORADIUSDMG
	+LOOKALLAROUND
	+NOINFIGHTING
	DropItem "None"
	Health 2000
	States
	{
	Spawn:
		ALIC A 0
		ALIC A 0 A_SetTranslucent(1.0)
	Idle:
		ALIC ABCDEFGHIJKLMNOP 3 A_Look
		Loop
	See:
		ALIC ABCDEFGHIJKLMNOP 3 A_Chase
		Loop
	Melee:
	Missile:
		ALIC A 0 A_Jump(170,"RingDolls","RingDolls","LaserDolls","ChargeDolls")
		Goto SpreadDolls
	SpreadDolls:
		Goto SpreadDollsEasy
	RingDolls:
		Goto RingDollsEasy
	LaserDolls:
		Goto LaserDollsEasy
	ChargeDolls:
		Goto ChargeDollsEasy
	Death:
		TNT1 A 0 A_KillChildren
		TNT1 A 0 A_PlaySound("touhou/defeat",0,1.0,0,ATTN_NORM)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFireWhite",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		Stop
	}
}

actor CocytusMarisa : MarisaNS3
{
	-NORADIUSDMG
	+LOOKALLAROUND
	+NOINFIGHTING
	DropItem "None"
	Health 2250
	States
	{
	Spawn:
		MARI A 0
		MARI A 0 A_SetTranslucent(0.1)
		MARI ABCDEFGHIJ 2 A_FadeIn(0.1)
	Idle:
		MARI ABCDEFGHIJ 2 A_Look
		Goto Idle
	See:
		MARI A 0 A_JumpIfInventory("SpellcardActive",1,"ChaseState")
		MARI A 0 A_SetTranslucent(1.0,0)
		MARI A 0 A_GiveInventory("SpellcardActive")
		MARI A 0 A_UnSetInvulnerable
	ChaseState:
		MARI ABCDEFGHIJ 2 A_Chase
		Loop
	Missile:
		MAR1 A 0 A_Jump(255,"Missile1","Missile2","Missile1","Missile2","MagicMissile","IllusionLaser")
		Goto Missile1
	Missile1:
		Goto Missile1Easy
	Missile2:
		Goto Missile2Easy
	Death:
		TNT1 A 0 A_PlaySound("touhou/defeat",0,1.0,0,ATTN_NORM)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFireWhite",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		Stop
	}
}

actor CocytusReimu : ReimuNS4
{
	-NORADIUSDMG
	+LOOKALLAROUND
	+NOINFIGHTING
	DropItem "None"
	Health 2500
	States
	{
	Idle:
		REIM ABCDEFGHIJ 3 A_Look
		Goto Idle
	See:
		REIM L 0 A_ChangeFlag("FLOAT",0)
		REIM L 0 A_ChangeFlag("NOGRAVITY",0)
		REIM A 0 A_Jump(32,"FastSee")
		REIM ABCDEFGHIJ 2 Fast A_Chase("Melee","Missile")
		REIM A 0 A_JumpIf(z-floorz > 96, "FastSee")
		Goto See+2
	Missile:
		REIM A 0 A_JumpIf(z-floorz > 64, "AirMissile")
		REIM L 0 A_ChangeFlag("FLOAT",0)
		REIM L 0 A_ChangeFlag("NOGRAVITY",0)
		REIM A 0 A_Jump(255,"SpreadAmulets1","SpreadAmulets1","SpreadAmulets2","SpreadAmulets2","HomingAmulet","YinYangOrb","Needles","YoukaiBuster")
		Goto SpreadAmulets1
	SpreadAmulets1:
		Goto SpreadAmulets1Easy
	SpreadAmulets2:
		Goto SpreadAmulets2Easy
	HomingAmulet:
		Goto HomingAmuletNormal
	YinYangOrb:
		Goto YinYangOrbNormal
	Needles:
		Goto NeedlesNormal
	YoukaiBuster:
		Goto YoukaiBusterNormal
	AirMissile:
		REIM L 0 A_ChangeFlag("FLOAT",1)
		REIM L 0 A_ChangeFlag("NOGRAVITY",1)
		REIM A 0 A_Jump(255,"AirHomingAmulet","AirSpreadAmulet","AirNeedles")
		Goto AirHomingAmulet
	AirHomingAmulet:
		Goto AirHomingAmuletNormal
	AirSpreadAmulet:
		Goto AirSpreadAmuletNormal
	AirNeedles:
		Goto AirNeedlesNormal
	Death:
		TNT1 A 0 A_PlaySound("touhou/defeat",0,1.0,0,ATTN_NORM)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFireWhite",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		Stop
	}
}

ACTOR ExMephistophelesInferno : ExMephistopheles 31420
{
	Health 10816 //13 * 13 * 4 * 4 * 4 (because 4 is Death)
	MinMissileChance 0
	Speed 0
	PainChance 0
	+INVULNERABLE
	+NOPAIN
	var int user_x;
	var int user_y;
	var int user_angle;
	States
	{
	See:
		PYLD A 0 A_JumpIfInventory("SpellcardActive",1,"Missile")
		PYLD MN 8 A_FaceTarget
		PYLD O 0 Thing_ChangeTID(0,6320)
		PYLD O 0 ACS_NamedExecute("BHI_BossStartAttack",0,6320,0,true)
		PYLD O 0 ACS_NamedExecute("BHI_BossStartTimerAlternative",0,6320,169) //13 * 13
		PYLD O 0 ACS_Execute(607,0,140)
		PYLD O 0 ACS_Execute(33,0)
		PYLD O 0 A_PlaySound("touhou/spellcard",0,1.0,0,ATTN_NONE)
		PYLD O 0 A_GiveInventory("SpellcardActive",1)
		PYLD OOOOOOOOOOOOOOOOPPPPPPPPPPPPPPPP 1 BRIGHT A_CustomMissile("RainCometNull",42,0,random(0,360))
		PYLD P 0 A_UnSetInvulnerable
		Goto Missile
	Missile:
		PYLD P 0 A_JumpIfInventory("BossTimerCheck20", 1, "Missile4")
		PYLD P 0 A_JumpIfInventory("BossTimerCheck30", 1, "Missile4B")
		PYLD P 0 A_JumpIfHealthLower(1352,"Missile4")
		PYLD P 0 A_JumpIfHealthLower(2704,"Missile4B")
		PYLD P 14 A_FaceTarget
		PYLD P 0 A_JumpIfHealthLower(5408,"Missile3")
		PYLD P 0 A_JumpIfHealthLower(6760,"Missile2")
		PYLD P 0 A_JumpIfHealthLower(8112,"Missile2B")
		PYLD P 0 A_JumpIfHealthLower(9464,"Missile1")
		PYLD P 7 A_FaceTarget
		Goto Missile1
	Missile1:
		PYLD P 0 A_SetUserVar("user_x",random(-128,128))
		PYLD P 0 A_SetUserVar("user_y",random(16,64))
		PYLD P 0 A_SetUserVar("user_angle",random(0,11))
	Missile1Loop:
		PYLD P 0 A_CustomMissile("ExMephistophelesInfernoBullet1",user_y,user_x,user_angle,CMF_AIMDIRECTION,0)
		PYLD P 0 A_SetUserVar("user_angle", user_angle+12)
		PYLD P 0 A_JumpIf(user_angle >= 360, "Missile")
		Loop
	Missile2B:
		PYLD P 0 A_FaceTarget
		PYLD P 0 A_SetUserVar("user_x",random(-192,192))
		PYLD P 0 A_SetUserVar("user_y",random(16,64))
		PYLD P 0 A_SetUserVar("user_angle",random(0,35))
	Missile2BLoop:
		PYLD P 0 A_CustomMissile("ExMephistophelesInfernoBullet2",user_y,user_x,user_angle,CMF_AIMDIRECTION,0)
		PYLD P 0 A_SetUserVar("user_angle", user_angle+36)
		PYLD P 0 A_JumpIf(user_angle >= 360, "Missile1")
		Loop
	Missile2:
		PYLD P 0 A_FaceTarget
		PYLD P 0 A_SetUserVar("user_x",random(-384,384))
		PYLD P 0 A_SetUserVar("user_y",random(16,64))
		PYLD P 0 A_SetUserVar("user_angle",random(0,35))
	Missile2Loop:
		PYLD P 0 A_CustomMissile("ExMephistophelesInfernoBullet2",user_y,user_x,user_angle,CMF_AIMDIRECTION,0)
		PYLD P 0 A_SetUserVar("user_angle", user_angle+36)
		PYLD P 0 A_JumpIf(user_angle >= 360, "Missile2B")
		Loop
	Missile3:
		PYLD P 0 A_SetUserVar("user_x",random(-640,640))
		PYLD P 0 A_SetUserVar("user_y",random(16,64))
		PYLD P 0 A_SetUserVar("user_angle",random(0,5))
	Missile3Loop:
		PYLD P 0 A_CustomMissile("ExMephistophelesInfernoBullet3",user_y,user_x,user_angle,CMF_AIMDIRECTION,0)
		PYLD P 0 A_SetUserVar("user_angle", user_angle+6)
		PYLD P 0 A_JumpIf(user_angle >= 360, "Missile2")
		Loop
	Missile4B:
		PYLD P 7 A_FaceTarget
		PYLD P 0 A_SetUserVar("user_angle",random(5,10))
	Missile4BLoop:
		PYLD P 0 A_CustomMissile("ExMephistophelesInfernoBullet4",user_y,user_x,user_angle,CMF_AIMDIRECTION,0)
		PYLD P 0 A_SetUserVar("user_angle", user_angle+15)
		PYLD P 0 A_JumpIf(user_angle >= 360, "Missile3")
		Loop
	Missile4:
		PYLD P 7 A_FaceTarget
		PYLD P 0 A_SetUserVar("user_angle",random(0,14))
	Missile4Loop:
		PYLD P 0 A_CustomMissile("ExMephistophelesInfernoBullet4",user_y,user_x,user_angle,CMF_AIMDIRECTION,0)
		PYLD P 0 A_SetUserVar("user_angle", user_angle+15)
		PYLD P 0 A_JumpIf(user_angle >= 360, "Missile4B")
		Loop
	Death:
		PYLD O 0 ACS_Execute(609,0)
		PYLD O 0 ACS_NamedTerminate("BHI_BossStartAttack",0)
		PYLD O 0 ACS_NamedExecute("BHI_BossStopAttack",0)
		PYLD O 0 A_GiveInventory("BulletDeathTrigger",1)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFireWhite",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		PYLD R 20 BRIGHT A_PlaySound("touhou/defeat",0,1.0,0,ATTN_NORM)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFire",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		PYLD S 20 BRIGHT A_Scream
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFire",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		PYLD T 20 BRIGHT A_PlaySound("touhou/defeat",0,1.0,0,ATTN_NORM)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFire",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		PYLD U 20 BRIGHT A_NoBlocking 
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFire",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		PYLD VW 6 BRIGHT 
		PYLD X 6 BRIGHT
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFire",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("TouhouFireWhite",frandom(4,-4),frandom(4,-4),frandom(4,-4),frandom(8,-8),frandom(8,-8),frandom(8,-8),frandom(0,360),0,0)
		PYLD Y 3 BRIGHT A_PlaySound("touhou/defeat",0,1.0,0,ATTN_NONE)
		PYLD Y 0 ACS_Execute(34,0)
		PYLD ZZZZZZZZZZ 3 BRIGHT A_FadeOut(0.1)
		Stop
	}
}
ACTOR ExMephistophelesInfernoBullet1
{
  Radius 2
  Height 4
  Speed 10
  FastSpeed 20
  damage (12)
  Projectile
  +FORCEXYBILLBOARD
  RenderStyle Add
  SeeSound "touhou/fire"
  DeathSound "touhou/hit"
  DamageType "MephistophelesDamage"
  States
  {
  Spawn:
    RBL1 A 1 Bright A_JumpIfInTargetInventory("BulletDeathTrigger",1,"Death")
    Loop
  Death:
    RBL1 AAAAAAAAAA 1 Bright A_FadeOut
    Stop
  }
}
ACTOR ExMephistophelesInfernoBullet2
{
  Radius 2
  Height 4
  Speed 15
  FastSpeed 25
  damage (10)
  Projectile
  +FORCEXYBILLBOARD
  RenderStyle Add
  SeeSound "touhou/fire"
  DeathSound "touhou/hit"
  DamageType "MephistophelesDamage"
  States
  {
  Spawn:
    YBL4 A 1 Bright A_JumpIfInTargetInventory("BulletDeathTrigger",1,"Death")
    Loop
  Death:
    YBL4 AAAAAAAAAA 1 Bright A_FadeOut
    Stop
  }
}
ACTOR ExMephistophelesInfernoBullet3
{
  Radius 2
  Height 4
  Speed 20
  FastSpeed 30
  damage (8)
  Projectile
  +FORCEXYBILLBOARD
  RenderStyle Add
  SeeSound "touhou/fire"
  DeathSound "touhou/hit"
  DamageType "MephistophelesDamage"
  States
  {
  Spawn:
    WBL4 A 1 Bright A_JumpIfInTargetInventory("BulletDeathTrigger",1,"Death")
    Loop
  Death:
    WBL4 AAAAAAAAAA 1 Bright A_FadeOut
    Stop
  }
}
ACTOR ExMephistophelesInfernoBullet4
{
  Radius 4
  Height 8
  Speed 25
  FastSpeed 35
  damage (16)
  Projectile
  +FORCEXYBILLBOARD
  RenderStyle Add
  SeeSound "touhou/fire"
  DeathSound "touhou/hit"
  DamageType "MephistophelesDamage"
  States
  {
  Spawn:
    BBL3 A 1 Bright A_JumpIfInTargetInventory("BulletDeathTrigger",1,"Death")
    Loop
  Death:
    BBL3 AAAAAAAAAA 1 Bright A_FadeOut
    Stop
  }
}